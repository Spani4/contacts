!function(t){function e(e){for(var n,s,c=e[0],i=e[1],l=e[2],d=0,p=[];d<c.length;d++)s=c[d],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&p.push(a[s][0]),a[s]=0;for(n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n]);for(u&&u(e);p.length;)p.shift()();return o.push.apply(o,l||[]),r()}function r(){for(var t,e=0;e<o.length;e++){for(var r=o[e],n=!0,c=1;c<r.length;c++){var i=r[c];0!==a[i]&&(n=!1)}n&&(o.splice(e--,1),t=s(s.s=r[0]))}return t}var n={},a={0:0},o=[];function s(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=t,s.c=n,s.d=function(t,e,r){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(r,n,function(e){return t[e]}.bind(null,n));return r},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var c=window.webpackJsonp=window.webpackJsonp||[],i=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=i;o.push([67,1]),r()}({23:function(t,e,r){},67:function(t,e,r){"use strict";r.r(e);r(23);var n=r(7),a=r(12),o=r.n(a),s=r(4),c=r(0),i=r.n(c),l=r(3),u=r.n(l),d=r(5),p=r.n(d),m=r(9),f=r.n(m),v="AIzaSyAQyFm0xDYZrPL45nyffNi3jCqwtOBRqLc";function b(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function h(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?b(Object(r),!0).forEach((function(e){u()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):b(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var g=f.a.create({baseURL:"https://identitytoolkit.googleapis.com/v1"});g.interceptors.request.use((function(t){return t.data=h(h({},t.data),{},{returnSecureToken:!0}),t.url=new URL(t.baseURL+t.url),t.url.searchParams.set("key",v),bt.dispatch("startLoading"),t}),(function(t){throw t})),g.interceptors.response.use((function(t){var e={id:t.data.localId,email:t.data.email},r={token:t.data.idToken,expires:Date.now()+1e3*t.data.expiresIn,refreshToken:t.data.refreshToken,user:e};return localStorage.setItem("jwt",JSON.stringify(r)),bt.commit("SET_USER",e),t}));var O=g,w=f.a.create({baseURL:"https://securetoken.googleapis.com/v1/token"});w.interceptors.request.use((function(t){var e=JSON.parse(localStorage.getItem("jwt")).refreshToken;t.url=new URL(t.baseURL),t.url.searchParams.set("key",v);var r={grant_type:"refresh_token",refresh_token:e};return t.data=r,t})),w.interceptors.response.use((function(t){var e=JSON.parse(localStorage.getItem("jwt"));return e.token=t.data.access_token,e.expires=Date.now()+1e3*t.data.expires_in,e.refreshToken=t.data.refresh_token,localStorage.setItem("jwt",JSON.stringify(e)),t.data=e,t}));var C=w,y=f.a.create({baseURL:"https://contacts-65dbf.firebaseio.com"});y.interceptors.request.use(function(){var t=p()(i.a.mark((function t(e){var r,n,a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=JSON.parse(localStorage.getItem("jwt")),n=bt.state.user.id,!(r.expires<Date.now())){t.next=7;break}return t.next=5,C.post();case 5:a=t.sent,r=a.data;case 7:return e.baseURL+="/users/".concat(n),e.url=new URL(e.baseURL+e.url),e.url.searchParams.set("auth",r.token),bt.dispatch("startLoading"),t.abrupt("return",e);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());var j=O,_=y,P=r(13),x=r(8),k={email:{required:x.required,max:Object(x.maxLength)(100),email:x.email},password:{required:x.required,max:Object(x.maxLength)(100),min:Object(x.minLength)(6)},passwordConfirm:{sameAsPassword:Object(x.sameAs)("password")}};function E(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function $(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?E(Object(r),!0).forEach((function(e){u()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var S={name:"SignIn",data:function(){return{email:"",password:"",showErrors:!1}},methods:$($({},Object(s.b)("auth",["signIn"])),{},{submit:function(){var t=this;if(this.$v.$invalid)this.showErrors=!0;else{var e={email:this.email,password:this.password};this.signIn(e).catch((function(e){t.$emit("authError",e)}))}}}),validations:{email:k.email,password:k.password},mounted:function(){this.$emit("mounted")}},D=r(1),T=Object(D.a)(S,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"sign-in"},[r("form",[r("div",{staticClass:"form-group"},[r("label",{staticClass:"d-block"},[t._v("E-mail"),r("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model.trim",value:t.$v.email.$model,expression:"$v.email.$model",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"email"},domProps:{value:t.$v.email.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.email,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t.showErrors?r("div",{staticClass:"text-danger"},[t.$v.email.email?t._e():r("small",{staticClass:"d-block"},[t._v("Email is invalid")]),t.$v.email.required?t._e():r("small",{staticClass:"d-block"},[t._v("Email is required")]),t.$v.email.max?t._e():r("small",{staticClass:"d-block"},[t._v("Email is too long. You gotta be kidding.")])]):t._e()]),r("div",{staticClass:"form-group"},[r("label",{staticClass:"d-block"},[t._v("Password"),r("input",{directives:[{name:"model",rawName:"v-model",value:t.$v.password.$model,expression:"$v.password.$model"}],staticClass:"form-control",attrs:{type:"password"},domProps:{value:t.$v.password.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.password,"$model",e.target.value)}}})]),t.showErrors?r("div",{staticClass:"text-danger"},[t.$v.password.max?t._e():r("small",{staticClass:"d-block"},[t._v("Password is too long. You gotta be kidding.")]),t.$v.password.required?t._e():r("small",{staticClass:"d-block"},[t._v("Password is required")]),t.$v.password.min?t._e():r("small",{staticClass:"d-block"},[t._v("It's too short (That's what she said)")])]):t._e()]),t._t("autherror"),r("div",{staticClass:"text-right"},[r("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.submit}},[t._v("Sign In")])])],2)])}),[],!1,null,null,null).exports;function N(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function L(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?N(Object(r),!0).forEach((function(e){u()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):N(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var A={name:"SignUp",data:function(){return{email:"",password:"",passwordConfirm:"",showErrors:!1}},methods:L(L({},Object(s.b)("auth",["signUp"])),{},{submit:function(){var t=this;return p()(i.a.mark((function e(){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.$v.$invalid){e.next=3;break}return t.showErrors=!0,e.abrupt("return");case 3:r={email:t.email,password:t.password},t.signUp(r).catch((function(e){t.$emit("authError",e)}));case 5:case"end":return e.stop()}}),e)})))()}}),validations:{email:k.email,password:k.password,passwordConfirm:k.passwordConfirm},mounted:function(){this.$emit("mounted")}},U={name:"AuthFrame",components:{SignIn:T,SignUp:Object(D.a)(A,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"sign-up"},[r("form",[r("div",{staticClass:"form-group"},[r("label",{staticClass:"d-block"},[t._v("E-mail"),r("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model.trim",value:t.$v.email.$model,expression:"$v.email.$model",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"email"},domProps:{value:t.$v.email.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.email,"$model",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t.showErrors?r("div",{staticClass:"text-danger"},[t.$v.email.email?t._e():r("small",{staticClass:"d-block"},[t._v("Email is invalid")]),t.$v.email.required?t._e():r("small",{staticClass:"d-block"},[t._v("Email is required")]),t.$v.email.max?t._e():r("small",{staticClass:"d-block"},[t._v("Email is too long. You gotta be kidding.")])]):t._e()]),r("div",{staticClass:"form-group"},[r("label",{staticClass:"d-block"},[t._v("Password"),r("input",{directives:[{name:"model",rawName:"v-model",value:t.$v.password.$model,expression:"$v.password.$model"}],staticClass:"form-control",attrs:{type:"password"},domProps:{value:t.$v.password.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.password,"$model",e.target.value)}}})]),t.showErrors?r("div",{staticClass:"text-danger"},[t.$v.password.max?t._e():r("small",{staticClass:"d-block"},[t._v("Password is too long. You gotta be kidding.")]),t.$v.password.required?t._e():r("small",{staticClass:"d-block"},[t._v("Password is required")]),t.$v.password.min?t._e():r("small",{staticClass:"d-block"},[t._v("Password requires at least 6 symbols")])]):t._e()]),r("div",{staticClass:"form-group"},[r("label",{staticClass:"d-block"},[t._v("Confirm password"),r("input",{directives:[{name:"model",rawName:"v-model",value:t.$v.passwordConfirm.$model,expression:"$v.passwordConfirm.$model"}],staticClass:"form-control",attrs:{type:"password"},domProps:{value:t.$v.passwordConfirm.$model},on:{input:function(e){e.target.composing||t.$set(t.$v.passwordConfirm,"$model",e.target.value)}}})]),t.showErrors?r("div",{staticClass:"text-danger"},[t.$v.passwordConfirm.sameAsPassword?t._e():r("small",{staticClass:"d-block"},[t._v("Passwords does not match.")])]):t._e()]),t._t("autherror"),r("div",{staticClass:"text-right"},[r("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.submit()}}},[t._v("Sign Up")])])],2)])}),[],!1,null,null,null).exports},data:function(){return{action:"sign-in",authError:!1}},computed:{translatedAuthError:function(){switch(this.authError){case"EMAIL_EXISTS":return"The email address is already in use.";case"TOO_MANY_ATTEMPTS_TRY_LATER":return"We have blocked all requests from this device due to unusual activity. Try again later.";case"EMAIL_NOT_FOUND":return"There is no user record corresponding to this identifier.";case"INVALID_PASSWORD":return"The password is invalid.";case"USER_DISABLED":return"The user account has been disabled by an administrator.";default:return"Authorization error"}}}},I={name:"AuthPage",components:{AuthFrame:Object(D.a)(U,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"auth-frame p-3 shadow rounded-sm"},[r("div",{staticClass:"auth-frame__tabs nav nav-tabs nav-justified"},[r("div",{staticClass:"nav-item w-50"},[r("a",{staticClass:"nav-link w-100 text-center",class:{active:"sign-in"==t.action},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.action="sign-in"}}},[t._v("Sign In")])]),r("div",{staticClass:"nav-item w-50"},[r("a",{staticClass:"nav-link w-100 text-center",class:{active:"sign-up"==t.action},attrs:{href:"#"},on:{click:function(e){e.preventDefault(),t.action="sign-up"}}},[t._v("Sign Up")])])]),r("div",{staticClass:"auth-frame__content border-top-0 bg-white border p-3"},[r(t.action,{tag:"component",on:{authError:function(e){t.authError=e},mounted:function(e){t.authError=!1}},scopedSlots:t._u([{key:"autherror",fn:function(){return[t.authError?r("div",{staticClass:"text-danger py-2"},[t._v(t._s(t.translatedAuthError))]):t._e()]},proxy:!0}])})],1)])}),[],!1,null,null,null).exports}},R=Object(D.a)(I,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"auth-page bg-light"},[e("div",{staticClass:"container"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col col-md-8 col-lg-6 mx-auto"},[e("auth-frame")],1)])])])}),[],!1,null,null,null).exports,q={methods:{logout:function(){this.$store.dispatch("auth/logout")}},computed:{email:function(){return this.$store.state.user.email}}},M=Object(D.a)(q,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("header",{staticClass:"header"},[r("div",{staticClass:"container"},[r("div",{staticClass:"row"},[t._m(0),r("div",{staticClass:"col-12 col-sm-9 header__right"},[r("span",[t._v(t._s(t.email))]),r("a",{staticClass:"header__logout-link text-secondary",attrs:{href:"/auth"},on:{click:function(e){return e.preventDefault(),t.logout(e)}}},[t._v("Exit")])])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"col-12 col-sm-3 header__left"},[e("h1",{staticClass:"header__title"},[this._v("Contacts")])])}],!1,null,null,null).exports;function B(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function J(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?B(Object(r),!0).forEach((function(e){u()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):B(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var Y={props:{contact:Object},methods:J(J({},Object(s.b)("contacts",["addContact","updateContact"])),{},{handleClick:function(){var t=this;return p()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.normalizeContact(),!t.isNew){e.next=6;break}return e.next=4,t.addContact(t.contact);case 4:e.next=8;break;case 6:return e.next=8,t.updateContact(t.contact);case 8:t.$emit("saved");case 9:case"end":return e.stop()}}),e)})))()},normalizeContact:function(){this.contact.phones=this.contact.phones.filter((function(t,e){return 0!==e||t.number&&t.number.length||(t.number="None"),0==e||t.number&&t.number.length}))}}),computed:{isNew:function(){return!Boolean(this.contact.id)}}},z=Object(D.a)(Y,(function(){var t=this.$createElement;return(this._self._c||t)("button",{staticClass:"btn btn-success",attrs:{type:"button",disabled:!this.contact.name.length},on:{click:this.handleClick}},[this._v("Save    ")])}),[],!1,null,null,null).exports;function F(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function H(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?F(Object(r),!0).forEach((function(e){u()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var G={props:{contact:Object},methods:H(H({},Object(s.b)("contacts",["removeContact"])),{},{handleClick:function(){var t=this;return p()(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.removeContact(t.contact);case 2:t.$emit("removed");case 3:case"end":return e.stop()}}),e)})))()}})},V=Object(D.a)(G,(function(){var t=this.$createElement;return(this._self._c||t)("button",{staticClass:"btn btn-danger",attrs:{type:"button"},on:{click:this.handleClick}},[this._v("Remove")])}),[],!1,null,null,null).exports;function W(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function Q(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?W(Object(r),!0).forEach((function(e){u()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var X={components:{SaveBtn:z,RemoveBtn:V},props:{contactToEdit:Object},data:function(){return{contact:{name:"",address:"",phones:[{description:"Main",number:void 0}],details:""}}},computed:Q(Q({},Object(s.c)(["user"])),{},{additionalPhones:function(){return this.contact.phones.filter((function(t,e){return 0!==e}))}}),methods:{addPhone:function(){this.contact.phones.push({description:"Mobile",number:""})},removePhone:function(t){this.contact.phones=this.contact.phones.filter((function(e,r){return t!=r}))}},mounted:function(){this.contactToEdit&&(this.contact=Q({},this.contactToEdit))}},Z=Object(D.a)(X,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"contact-editor"},[r("form",{staticClass:"container py-3 bg-secondary text-dark"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col pl-4 mb-3"},[r("button",{staticClass:"btn btn-outline-primary",attrs:{type:"button"},on:{click:function(e){return t.$emit("hide")}}},[t._v("â† Back")])])]),r("div",{staticClass:"row form-group"},[r("label",{staticClass:"col-12 col-md-6 col-xl-4"},[r("h3",{staticClass:"mb-1"},[t._v("Contact name")]),r("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model",value:t.contact.name,expression:"contact.name"}],staticClass:"form-control",domProps:{value:t.contact.name},on:{input:function(e){e.target.composing||t.$set(t.contact,"name",e.target.value)}}})])]),r("div",{staticClass:"row form-group"},[r("label",{staticClass:"col-12 col-xl-8"},[r("h3",{staticClass:"mb-1"},[t._v("Address")]),r("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.contact.address,expression:"contact.address",modifiers:{trim:!0}}],staticClass:"form-control",domProps:{value:t.contact.address},on:{input:function(e){e.target.composing||t.$set(t.contact,"address",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),r("div",{staticClass:"row form-group"},[r("label",{staticClass:"col-12 col-md-6 col-xl-4"},[r("h3",{staticClass:"mb-1"},[t._v("Main phone")]),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.contact.phones[0].number,expression:"contact.phones[0].number",modifiers:{trim:!0}}],staticClass:"form-control",domProps:{value:t.contact.phones[0].number},on:{input:function(e){e.target.composing||t.$set(t.contact.phones[0],"number",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),r("div",{staticClass:"row form-group"},[r("h3",{staticClass:"col-12 mb-1"},[t._v("Additional phones")]),t._l(t.additionalPhones,(function(e,n){return r("div",{staticClass:"p-2 w-100 border-bottom"},[r("label",{staticClass:"col-12 col-sm-5 col-xl-4"},[r("h5",{staticClass:"mb-1"},[t._v("Description               ")]),r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.additionalPhones[n].description,expression:"additionalPhones[index].description",modifiers:{trim:!0}}],staticClass:"form-control",domProps:{value:t.additionalPhones[n].description},on:{input:function(e){e.target.composing||t.$set(t.additionalPhones[n],"description",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),r("label",{staticClass:"col-12 col-sm-5 col-xl-4"},[r("h5",{staticClass:"mb-1"},[t._v("Phone number")]),r("input",{directives:[{name:"focus",rawName:"v-focus"},{name:"model",rawName:"v-model.trim",value:t.additionalPhones[n].number,expression:"additionalPhones[index].number",modifiers:{trim:!0}}],staticClass:"form-control",domProps:{value:t.additionalPhones[n].number},on:{input:function(e){e.target.composing||t.$set(t.additionalPhones[n],"number",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),r("button",{staticClass:"btn btn-danger btn-sm",attrs:{type:"button"},on:{click:function(e){return t.removePhone(n+1)}}},[t._v("remove")])])})),r("div",{staticClass:"col-12 pt-3"},[r("button",{staticClass:"btn btn-primary",attrs:{type:"button"},on:{click:t.addPhone}},[t._v("Add phone")])])],2),r("div",{staticClass:"row form-group"},[r("label",{staticClass:"col-12 col-xl-8"},[r("h3",{staticClass:"mb-1"},[t._v("Details")]),r("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.contact.details,expression:"contact.details",modifiers:{trim:!0}}],staticClass:"form-control",domProps:{value:t.contact.details},on:{input:function(e){e.target.composing||t.$set(t.contact,"details",e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})])]),r("div",{staticClass:"row form-group"},[r("div",{staticClass:"btn-group col-12 col-xl-8"},[r("save-btn",{attrs:{type:"button",contact:t.contact},on:{saved:function(e){return t.$emit("hide")}}},[t._v("Save")]),r("button",{staticClass:"btn btn-light",attrs:{type:"button"},on:{click:function(e){return t.$emit("hide")}}},[t._v("Cancel")]),t.contactToEdit?r("remove-btn",{attrs:{contact:t.contactToEdit},on:{removed:function(e){return t.$emit("hide")}}}):t._e()],1)])])])}),[],!1,null,null,null).exports;function K(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function tt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?K(Object(r),!0).forEach((function(e){u()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):K(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var et={props:{selectedContact:Object},data:function(){return{filterText:""}},computed:tt(tt({},Object(s.c)("contacts",["contacts"])),{},{sortedContacts:function(){return this.contacts.sort((function(t,e){return t.name.toLowerCase()>e.name.toLowerCase()?1:-1}))},filteredContacts:function(){var t=this;return this.sortedContacts.filter((function(e){return e.name.toLowerCase().includes(t.filterText.toLowerCase())}))}})},rt=Object(D.a)(et,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"contacts-list"},[r("div",{staticClass:"p-3"},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.filterText,expression:"filterText",modifiers:{trim:!0}}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search..."},domProps:{value:t.filterText},on:{input:function(e){e.target.composing||(t.filterText=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}})]),t._l(t.filteredContacts,(function(e){return r("div",{key:e.id,staticClass:"contacts-list__item",class:{active:e==t.selectedContact},on:{click:function(r){return t.$emit("input",e)}}},[t._v(t._s(e.name))])}))],2)}),[],!1,null,null,null).exports,nt={components:{RemoveBtn:V},props:{contact:Object},computed:{additionalPhones:function(){return this.contact.phones.filter((function(t,e){return 0!==e}))}}};function at(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ot(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?at(Object(r),!0).forEach((function(e){u()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):at(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var st={name:"ContactsPage",components:{AppHeader:M,ContactEditor:Z,ContactsList:rt,ContactDetails:Object(D.a)(nt,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("transition",{attrs:{name:"fade-left-slide",mode:"out-in"}},[r("div",{key:t.contact.id,staticClass:"contact-details"},[r("h1",{staticClass:"mb-3"},[t._v(t._s(t.contact.name))]),r("div",{staticClass:"mb-3"},[r("h3",[t._v("Phones:")]),r("div",{staticClass:"row"},[t._l(t.contact.phones,(function(e){return[r("div",{staticClass:"col-6"},[t._v(t._s(e.description))]),r("div",{staticClass:"col-6"},[t._v(t._s(e.number))])]}))],2)]),t.contact.address.length?r("div",{staticClass:"mb-3"},[r("h3",[t._v("Address")]),r("div",[t._v(t._s(t.contact.address))])]):t._e(),t.contact.details.length?r("div",{staticClass:"mb-3"},[r("h3",[t._v("Details")]),r("div",[t._v(t._s(t.contact.details))])]):t._e(),r("div",{staticClass:"flex-grow-1"}),r("div",{staticClass:"container pt-2"},[r("div",{staticClass:"row w-100 mx-auto"},[r("div",{staticClass:"btn-group col"},[r("button",{staticClass:"col-4 btn btn-primary",attrs:{type:"button"},on:{click:function(e){return t.$emit("edit")}}},[t._v("Edit")]),r("button",{staticClass:"btn btn-light",attrs:{type:"button"},on:{click:function(e){return t.$emit("hide")}}},[t._v("Hide")]),r("remove-btn",{attrs:{contact:t.contact},on:{removed:function(e){return t.$emit("hide")}}})],1)])])])])}),[],!1,null,null,null).exports},data:function(){return{editorEnabled:!1,selectedContact:null}},methods:{editContact:function(){this.editorEnabled=!0},createContact:function(){this.selectedContact=null,this.editorEnabled=!0},closeEditor:function(){this.editorEnabled=!1}},computed:ot(ot({},Object(s.c)("contacts",["contacts"])),{},{selectedContactExists:function(){return this.contacts.indexOf(this.selectedContact)>-1&&this.selectedContact}})},ct=Object(D.a)(st,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"contacts-page bg-secondary"},[r("app-header"),t.editorEnabled?r("contact-editor",{attrs:{contactToEdit:t.selectedContact},on:{hide:t.closeEditor}}):r("div",{staticClass:"contacts-page__content container"},[r("div",{staticClass:"row"},[r("div",{staticClass:"col-12 col-md-6 col-lg-5 mb-3 mb-md-0"},[r("div",{staticClass:"text-center mb-3"},[r("button",{staticClass:"btn btn-primary btn-block",attrs:{type:"button"},on:{click:t.createContact}},[t._v("Add new")])]),r("contacts-list",{attrs:{selectedContact:t.selectedContact},model:{value:t.selectedContact,callback:function(e){t.selectedContact=e},expression:"selectedContact"}})],1),r("div",{staticClass:"col-12 col-md-6 col-lg-7 mh-100 overflow-auto"},[r("transition",{attrs:{name:"fade-left-slide",mode:"out-in"}},[t.selectedContactExists?r("contact-details",{attrs:{contact:t.selectedContact},on:{edit:t.editContact,hide:function(e){t.selectedContact=null}}}):t._e()],1)],1)])])],1)}),[],!1,null,null,null).exports;n.a.use(P.a);var it=[{path:"/auth",component:R},{path:"/",component:ct}],lt=new P.a({mode:"history",routes:it});function ut(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function dt(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ut(Object(r),!0).forEach((function(e){u()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ut(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var pt={namespaced:!0,state:{},actions:{signUp:function(t,e){return p()(i.a.mark((function r(){var n,a,o;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.dispatch,r.prev=1,r.next=4,j.post("/accounts:signUp",e);case 4:return a=r.sent,o={id:a.data.localId,email:a.data.email},r.next=8,n("storeUserInDatabase",dt(dt({},o),{},{contacts:[]}));case 8:lt.replace("/"),r.next=18;break;case 11:if(r.prev=11,r.t0=r.catch(1),!r.t0.response||!r.t0.response.data){r.next=17;break}throw r.t0.response.data.error.message;case 17:console.dir(r.t0);case 18:return r.prev=18,n("stopLoading",null,{root:!0}),r.finish(18);case 21:case"end":return r.stop()}}),r,null,[[1,11,18,21]])})))()},signIn:function(t,e){return p()(i.a.mark((function r(){var n;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.dispatch,r.prev=1,r.next=4,j.post("/accounts:signInWithPassword",e);case 4:return r.next=6,n("contacts/fetchContacts",null,{root:!0});case 6:lt.replace("/"),r.next=16;break;case 9:if(r.prev=9,r.t0=r.catch(1),!r.t0.response||!r.t0.response.data){r.next=15;break}throw r.t0.response.data.error.message;case 15:console.dir(r.t0);case 16:return r.prev=16,n("stopLoading",null,{root:!0}),r.finish(16);case 19:case"end":return r.stop()}}),r,null,[[1,9,16,19]])})))()},autoLogin:function(t){return p()(i.a.mark((function e(){var r,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.dispatch,n=t.commit,e.prev=1,a=JSON.parse(localStorage.getItem("jwt")).user,n("SET_USER",a,{root:!0}),e.next=6,r("contacts/fetchContacts",null,{root:!0});case 6:e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.warn("Autologin failed"),lt.replace("/auth");case 12:return e.prev=12,r("stopLoading",null,{root:!0}),e.finish(12);case 15:case"end":return e.stop()}}),e,null,[[1,8,12,15]])})))()},logout:function(t){var e=t.commit;e("SET_USER",null,{root:!0}),e("contacts/SET_CONTACTS",[],{root:!0}),localStorage.removeItem("jwt"),lt.replace("/auth")},storeUserInDatabase:function(t,e){return p()(i.a.mark((function t(){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,_.put(".json",e);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.dir(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()}},mutations:{},getters:{}};function mt(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function ft(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?mt(Object(r),!0).forEach((function(e){u()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):mt(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}var vt={namespaced:!0,state:{contacts:[]},actions:{fetchContacts:function(t){return p()(i.a.mark((function e(){var r,n,a,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.commit,t.dispatch,e.prev=1,e.next=4,_.get("/contacts.json");case 4:if((n=e.sent).data){e.next=7;break}return e.abrupt("return");case 7:for(a in n.data)n.data[a].id=a;o=Object.values(n.data),r("SET_CONTACTS",o),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.dir(e.t0);case 15:case"end":return e.stop()}}),e,null,[[1,12]])})))()},addContact:function(t,e){return p()(i.a.mark((function r(){var n,a,o;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.commit,a=t.dispatch,r.prev=1,r.next=4,_.post("/contacts.json",e);case 4:o=r.sent,e.id=o.data.name,n("PUSH_CONTACT",e),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),console.dir(r.t0);case 12:return r.prev=12,a("stopLoading",null,{root:!0}),r.finish(12);case 15:case"end":return r.stop()}}),r,null,[[1,9,12,15]])})))()},updateContact:function(t,e){return p()(i.a.mark((function r(){var n,a,o;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.commit,a=t.dispatch,r.prev=1,o=ft(ft({},e),{},{id:void 0}),r.next=5,_.put("/contacts/".concat(e.id,".json"),o);case 5:n("UPDATE_CONTACT",e),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),console.dir(r.t0);case 11:return r.prev=11,a("stopLoading",null,{root:!0}),r.finish(11);case 14:case"end":return r.stop()}}),r,null,[[1,8,11,14]])})))()},removeContact:function(t,e){return p()(i.a.mark((function r(){var n,a;return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return n=t.commit,a=t.dispatch,r.prev=1,r.next=4,_.delete("/contacts/".concat(e.id,".json"),e);case 4:r.sent,n("REMOVE_CONTACT",e),r.next=11;break;case 8:r.prev=8,r.t0=r.catch(1),console.dir(r.t0);case 11:return r.prev=11,a("stopLoading",null,{root:!0}),r.finish(11);case 14:case"end":return r.stop()}}),r,null,[[1,8,11,14]])})))()}},mutations:{SET_CONTACTS:function(t,e){t.contacts=e},PUSH_CONTACT:function(t,e){t.contacts.push(e)},REMOVE_CONTACT:function(t,e){t.contacts=t.contacts.filter((function(t){return t.id!==e.id}))},UPDATE_CONTACT:function(t,e){var r=t.contacts.find((function(t){return t.id===e.id}));for(var n in e)r[n]=e[n]}},getters:{}};n.a.use(s.a);var bt=new s.a.Store({modules:{auth:pt,contacts:vt},state:{loading:!1,user:null},actions:{startLoading:function(t){(0,t.commit)("SET_LOADING",!0)},stopLoading:function(t){(0,t.commit)("SET_LOADING",!1)}},mutations:{SET_LOADING:function(t,e){t.loading=e},SET_USER:function(t,e){t.user=e}}});function ht(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}var gt={computed:function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ht(Object(r),!0).forEach((function(e){u()(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ht(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}({},Object(s.c)(["loading"]))},Ot={components:{Loader:Object(D.a)(gt,(function(){var t=this.$createElement,e=this._self._c||t;return this.loading?e("div",{staticClass:"loader"},[e("div",{staticClass:"spinner-border text-primary"})]):this._e()}),[],!1,null,null,null).exports}},wt=Object(D.a)(Ot,(function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("router-view"),e("loader")],1)}),[],!1,null,null,null).exports;n.a.use(o.a),n.a.directive("focus",{inserted:function(t){t.focus()}});var Ct=document.getElementById("app");new n.a({name:"Contacts",el:Ct,store:bt,router:lt,created:function(){this.$store.dispatch("auth/autoLogin")},render:function(t){return t(wt)}})}});